window.trTM=window.trTM||{},trTM.d=trTM.d||{config:!1,init:!1,fired:!1},trTM.f=trTM.f||{},trTM.l=trTM.l||[],trTM.f.consent_check=function(t){if("string"!=typeof t||"init"!=t&&"update"!=t)return"function"==typeof trTM.f.log&&trTM.f.log("e10",{action:t}),!1;if(trTM.d.consent=trTM.d.consent||{},"init"==t&&trTM.d.consent.hasResponse)return!0;if("object"!=typeof Optanon||"function"!=typeof Optanon.GetDomainData)return!1;var n=Optanon.GetDomainData();if("object"!=typeof n.ConsentIntegrationData||"object"!=typeof n.ConsentIntegrationData.consentPayload||"object"!=typeof n.ConsentIntegrationData.consentPayload.customPayload||"object"!=typeof n.ConsentIntegrationData.consentPayload.purposes||"object"!=typeof n.ConsentModel||"string"!=typeof n.ConsentModel.Name)return!1;var e=n.ConsentIntegrationData.consentPayload;if("number"!=typeof e.customPayload.Interaction)return!1;if(trTM.d.consent.interactions=e.customPayload.Interaction,"object"!=typeof e.dsDataElements||"string"!=typeof e.dsDataElements.Country)return!1;trTM.d.consent.consent_model=n.ConsentModel.Name,"string"==typeof n.cctId&&(trTM.d.consent.consent_id=n.cctId),"object"==typeof e.dsDataElements&&"string"==typeof e.dsDataElements.InteractionType&&(trTM.d.consent.interaction_type=e.dsDataElements.InteractionType),"object"==typeof e.dsDataElements&&"string"==typeof e.dsDataElements.Country&&(trTM.d.consent.country=e.dsDataElements.Country);for(var o={},r=0,s={},a=0,p=0,c={},i=0;i<e.purposes.length;i++)c[e.purposes[i].Id]=e.purposes[i].TransactionType;for(i=0;i<n.Groups.length;i++)"string"==typeof c[n.Groups[i].PurposeId]&&("NO_CHOICE"==c[n.Groups[i].PurposeId]&&(s[n.Groups[i].OptanonGroupId]=n.Groups[i].GroupName.replace(/[^\w\d _-]+/g,""),a++),"NO_CHOICE"!=c[n.Groups[i].PurposeId]&&"CONFIRMED"!=c[n.Groups[i].PurposeId]||(o[n.Groups[i].OptanonGroupId]=n.Groups[i].GroupName.replace(/[^\w\d _-]+/g,""),r++),p++);var d=[],f=[];for(k in o)d.push(k),f.push(o[k]);return trTM.d.consent.purposeIDs=","+d.join(",")+",",trTM.d.consent.purposes=","+f.join(",")+",",trTM.d.consent.interaction_type?trTM.d.consent.feedback=trConfig.cmp.interaction_type:trTM.d.consent.feedback=p==a?"No OptIn Categories available":r==p?"Consent full accepted":r==a?"Consent declined":r<p?"Consent partially accepted":"Consent given",trTM.d.consent.hasResponse=!0,"function"==typeof trTM.f.log&&trTM.f.log("m2",JSON.parse(JSON.stringify(trTM.d.consent))),!0};