window.trTM=window.trTM||{},trTM.c=trTM.c||{},trTM.d=trTM.d||{version:"1.2.2",config:!1,init:!1,fired:!1},trTM.f=trTM.f||{},trTM.l=trTM.l||[],"function"!=typeof trTM.f.log&&(trTM.f.log=function(t,e){"object"==typeof e&&e&&(e=JSON.parse(JSON.stringify(e))),trTM.l.push({id:t,timestamp:(new Date).getTime(),obj:e})}),"function"!=typeof trTM.f.config&&(trTM.f.config=function(t){if(trTM.d.config)trTM.f.log("e1",trTM.c);else{trTM.c.gtmID=t.gtmID||"",trTM.c.gtmPurposes=t.gtmPurposes||"",trTM.c.gtmServices=t.gtmServices||"",trTM.c.gtmVendors=t.gtmVendors||"",trTM.c.tmID=trTM.c.gtmID?trTM.c.gtmID.substring(4):"",trTM.c.gdl=t.gdl||"dataLayer",trTM.c.env=t.env||"",trTM.c.gtag=t.gtag||null,trTM.c.gtagPurposes=t.gtagPurposes||"",trTM.c.gtagServices=t.gtagServices||"",trTM.c.gtagVendors=t.gtagVendors||"",trTM.c.consent=t.consent||{},trTM.c.consent.hasResponse=trTM.c.consent.hasResponse||!1,trTM.c.consent.feedback=trTM.c.consent.feedback||"",trTM.c.consent.purposes=trTM.c.consent.purposes||"",trTM.c.consent.services=trTM.c.consent.services||"",trTM.c.consent.vendors=trTM.c.consent.vendors||"",trTM.c.consent.cm=trTM.c.consent.cm||!1;var e=trTM.c.consent.consent_events||"";if(e){trTM.c.consent.consent_event_attr={};for(var n=e.split(","),r=0;r<n.length;r++){var c=n[r];if(c.indexOf("[")>=0&&c.indexOf("]")>=0){var s=c.substr(0,c.indexOf("[")),o=c.substr(c.indexOf("[")+1,c.indexOf("]")-c.indexOf("[")-1),i=o;o.indexOf("=")>=0&&(i=o.substr(0,o.indexOf("=")));var f="";o.indexOf("=")>=0&&(f=o.substr(o.indexOf("=")+1).replace(/["']/gm,"")),n[r]=s,trTM.c.consent.consent_event_attr[s]={},trTM.c.consent.consent_event_attr[s][i]=f}}trTM.c.consent.consent_events=","+n.join(",")+","}else trTM.c.consent_events="";for(k in trTM.c.consent.consent_id=trTM.c.consent.consent_id||"",trTM.c.consent.gtagmap=trTM.c.consent.gtagmap||{},trTM.c.consent.gtagmap)trTM.c.consent.gtagmap[k]="object"==typeof trTM.c.consent.gtagmap[k]?trTM.c.consent.gtagmap[k]:{},trTM.c.consent.gtagmap[k].status=trTM.c.consent.gtagmap[k].status||"denied",trTM.c.consent.gtagmap[k].purposes=trTM.c.consent.gtagmap[k].purposes||[],trTM.c.consent.gtagmap[k].services=trTM.c.consent.gtagmap[k].services||[],trTM.c.consent.gtagmap[k].vendors=trTM.c.consent.gtagmap[k].vendors||[];trTM.d.consent=trTM.d.consent||JSON.parse(JSON.stringify(trTM.c.consent)),trTM.d.consent.gtmConsent=!1,trTM.d.consent.gtagConsent=!1,trTM.d.config=!0,trTM.f.log("m1",trTM.c)}}),"function"!=typeof trTM.f.gtag&&(trTM.f.gtag=function(){var t=arguments;window[trTM.c.gdl]=window[trTM.c.gdl]||[],window[trTM.c.gdl].push(t)}),window.gtag=window.gtag||trTM.f.gtag,trTM.f.consent_check=trTM.f.consent_check||function(t){if(!trTM.d.config)return trTM.f.log("e2",null),!1;if("string"!=typeof t||"init"!=t&&"update"!=t)return trTM.f.log("e3",{action:t}),!1;if("init"==t&&e.hasResponse)return!0;var e={};return e.purposes="string"==typeof trTM.c.purposes?","+trTM.c.purposes+",":"",e.services="string"==typeof trTM.c.services?","+trTM.c.services+",":"",e.vendors="string"==typeof trTM.c.vendors?","+trTM.c.vendors+",":"",e.hasResponse=!0,e.feedback="no valid check fct given, cfg used",trTM.d.consent=e,trTM.f.log("m2",e),!0},"function"!=typeof trTM.f.chelp&&(trTM.f.chelp=function(t,e){var n=!0;if(t&&e)for(var r=t.split(","),c=0;c<r.length;c++)e.indexOf(","+r[c]+",")<0&&(n=!1);return n}),"function"!=typeof trTM.f.consent&&(trTM.f.consent=function(t){if(!trTM.d.config)return trTM.f.log("e4",null),!1;if("string"!=typeof t||"init"!=t&&"update"!=t)return trTm.f.log("e5",{a:t}),!1;if(!trTM.f.consent_check(t))return trTM.f.log("m8",null),!1;if(window[trTM.c.gdl]=window[trTM.c.gdl]||[],trTM.c.tmID&&trTM.f.chelp(trTM.c.gtmPurposes,trTM.d.consent.purposes)&&trTM.f.chelp(trTM.c.gtmServices,trTM.d.consent.services)&&trTM.f.chelp(trTM.c.gtmVendors,trTM.d.consent.vendors)&&(trTM.d.consent.gtmConsent=!0),trTM.c.tmID,trTM.c.gtag&&trTM.f.chelp(trTM.c.gtagPurposes,trTM.d.consent.purposes)&&trTM.f.chelp(trTM.c.gtagServices,trTM.d.consent.services)&&trTM.f.chelp(trTM.c.gtagVendors,trTM.d.consent.vendors)&&(trTM.d.consent.gtagConsent=!0),trTM.c.consent.cm){var e=trTM.d.consent.gtagmap;for(k in trTM.d.cm={},e){e[k].status=e[k].status||"denied",e[k].purposes=e[k].purposes||[],e[k].services=e[k].services||[],e[k].vendors=e[k].vendors||[];var n=e[k].status,r=!0;if(0==e[k].purposes.length&&0==e[k].services.length&&0==e[k].vendors.length&&(r=!1),e[k].purposes.length>0)for(var c=0;c<e[k].purposes.length;c++)trTM.d.consent.purposes.indexOf(","+e[k].purposes[c]+",")<0&&(r=!1);if(e[k].services.length>0)for(c=0;c<e[k].services.length;c++)trTM.d.consent.services.indexOf(","+e[k].services[c]+",")<0&&(r=!1);if(e[k].vendors.length>0)for(c=0;c<e[k].vendors.length;c++)trTM.d.consent.vendors.indexOf(","+e[k].vendors[c]+",")<0&&(r=!1);r&&(n="granted"),trTM.d.cm[k]=n}"update"==t&&"object"==typeof trTM.d.cm&&gtag("consent","update",trTM.d.cm)}return"function"==typeof trTM.f.consent_callback&&trTM.f.consent_callback(t),trTM.f.log("m3",trTM.d.consent),!0}),"function"!=typeof trTM.f.tm_init&&(trTM.f.tm_init=function(t,e,n,r,c){if(trTM.d.config){if(!trTM.d.init){trTM.d.init=!0,t[r].push({event:"gtm.js",initTime:(new Date).getTime(),"gtm.start":(new Date).getTime()});var s="script",o=e.getElementsByTagName(s)[0],i=e.createElement(s);i.src="https://www.googletagmanager.com/gtm.js?id=GTM-"+n+"&l="+r+c,i.async=!0,o.parentNode.insertBefore(i,o)}}else trTM.f.log("e7",null)}),"function"!=typeof trTM.f.consent_fct&&(trTM.f.consent_fct=function(){return!!trTM.f.consent("init")&&(trTM.d.fired||trTM.f.tm_inject(),!0)}),"function"!=typeof trTM.f.consent_timer_listener&&(trTM.f.consent_timer_listener=function(){trTM.f.consent_fct()&&void 0!==trTM.d.timer&&(clearInterval(trTM.d.timer),delete trTM.d.timer)}),"function"!=typeof trTM.f.consent_listener&&(trTM.f.consent_listener=function(){"function"==typeof trTM.f.consent_event_listener?trTM.f.consent_event_listener():trTM.d.timer=setInterval(trTM.f.consent_timer_listener,100)}),"function"!=typeof trTM.f.tm_inject&&(trTM.f.tm_inject=function(){if(!trTM.d.config)return trTM.f.log("e8",null),!1;if(!trTM.f.consent("init"))return trTM.f.log("m4",null),trTM.f.consent_listener(),!1;if(!trTM.d.fired){if(trTM.c.gtag&&trTM.d.consent.gtagConsent){var t=[];for(var e in trTM.c.gtag)t.push(e);if(t.length>0){var n=document.createElement("script");for(var e in n.src="https://www.googletagmanager.com/gtag/js?id="+t[0],n.type="text/javascript",n.async=!0,document.head.appendChild(n),gtag("js",new Date),trTM.c.gtag){var r=trTM.c.gtag[e];r?gtag("config",e,r):gtag("config",e)}"function"==typeof trTM.f.gtag_inject_callback&&trTM.f.gtag_inject_callback(),trTM.f.log("m5",trTM.c.gtag)}}if(trTM.c.tmID&&trTM.d.consent.gtmConsent){var c=window[trTM.c.gdl]||[];window[trTM.c.gdl]=[],trTM.c.consent.cm&&"object"==typeof trTM.d.cm&&gtag("consent","default",trTM.d.cm),trTM.f.fire({event:"trTM_consent_init",cmp:trTM.d.consent});var s=[];if(c.length>0)for(var o=0;o<c.length;o++)if("object"!=typeof c[o]||"number"!=typeof c[o].length&&"string"==typeof c[o].event){var i=JSON.parse(JSON.stringify(c[o]));void 0!==i["gtm.uniqueEventId"]&&delete i["gtm.uniqueEventId"],"gtm."==i.event.substr(0,4)?trTM.f.fire(i):s.push(i)}else trTM.f.fire(c[o]);trTM.f.tm_init(window,document,trTM.c.tmID,trTM.c.gdl,trTM.c.env);for(o=0;o<s.length;o++)trTM.f.fire(c[o]);"function"==typeof trTM.f.gtm_inject_callback&&trTM.f.gtm_inject_callback(),trTM.f.log("m6",null)}trTM.d.fired=!0}return!0}),"function"!=typeof trTM.f.fire&&(trTM.f.fire=function(t){if("object"==typeof t){var e=JSON.parse(JSON.stringify(t));if(window[trTM.c.gdl]=window[trTM.c.gdl]||[],trTM.c.consent.consent_events&&"string"==typeof e.event&&trTM.c.consent.consent_events.indexOf(","+e.event+",")>=0)if("object"==typeof trTM.c.consent.consent_event_attr[e.event])for(n in trTM.c.consent.consent_event_attr[e.event])void 0!==e[n]&&(trTM.c.consent.consent_event_attr[e.event][n]&&e[n]!=trTM.c.consent.consent_event_attr[e.event][n]||(trTM.f.consent("update"),trTM.f.fire({event:"trTM_consent_update",cmp:JSON.parse(JSON.stringify(trTM.d.consent)),cmp_obj:e})));else trTM.f.consent("update"),trTM.f.fire({event:"trTM_consent_update",cmp:JSON.parse(JSON.stringify(trTM.d.consent)),cmp_obj:e});if(trTM.c.tmID&&trTM.d.consent.gtmConsent&&("boolean"!=typeof e.gtm||e.gtm)&&window[trTM.c.gdl].push(e),trTM.c.gtag&&trTM.d.consent.gtagConsent&&"string"==typeof e.event&&e.event&&("boolean"!=typeof e.gtag||e.gtag))if("string"==typeof e.gtagID&&e.gtagID)e.send_to=e.gtagID,gtag("event",e.event,e);else for(var n in trTM.c.gtag)e.send_to=n,gtag("event",e.event,e);"function"==typeof trTM.f.fire_callback&&trTM.d.fired&&trTM.f.fire_callback(e),trTM.f.log("m7",e)}else trTM.f.log("e9",{o:typeof t})});